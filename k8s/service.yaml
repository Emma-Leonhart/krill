# Headless service for the krill StatefulSet.
# Gives each pod a stable DNS name: krill-0.krill.krill.svc.cluster.local
# Also exposes the gateway port for in-cluster access.
apiVersion: v1
kind: Service
metadata:
  name: krill
  namespace: krill
  labels:
    app.kubernetes.io/name: krill
    app.kubernetes.io/component: agent
spec:
  clusterIP: None   # headless â€” required for StatefulSet stable pod DNS
  selector:
    app.kubernetes.io/name: krill
  ports:
    - name: gateway
      port: 18789
      targetPort: gateway
      protocol: TCP
